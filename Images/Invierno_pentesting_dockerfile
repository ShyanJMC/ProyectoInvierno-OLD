#### DockerFile for pentesting minimal container
#### This file is part of Proyecto Invierno
#### github.com/ShyanJMC/ProyectoInvierno
# GPLv3
FROM debian:latest
MAINTAINER ShyanJMC (nothing_to_do@domain.com)

###### Upgrade the system and install wget, gnupg, git, curl and gcc
RUN apt update && apt upgrade -y && apt install -y wget gnupg git curl gcc

###### Download and add the repo's key of parrot.
RUN wget -qO - https://archive.parrotsec.org/parrot/misc/parrotsec.gpg > parrot_repository.gpg
RUN apt-key add parrot_repository.gpg

###### Set the parrot repos
RUN echo "deb http://deb.parrotsec.org/parrot stable main contrib non-free" >> /etc/apt/sources.list && apt update

###### Download the source code of the TmuxCheck utility of ProyectoInvierno
RUN curl -O https://raw.githubusercontent.com/ShyanJMC/ProyectoInvierno/master/utilities/TmuxCheck.c

###### Compile the same with all warnings enabled, each warning is trated as an error.
RUN mkdir /ProyectoInvierno
RUN gcc -Wall -Werror TmuxCheck.c -o /ProyectoInvierno/TmuxCheck

##### Install tmux
RUN apt install -y tmux

###### Add the same to the bash file for root
RUN echo "/ProyectoInvierno/TmuxCheck" >> /root/.bashrc
